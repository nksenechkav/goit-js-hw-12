{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/addMarkup.js","../src/js/onError.js","../src/js/createGallery.js","../src/js/fetchImage.js","../src/js/loader.js","../src/js/onFormSubmit.js","../src/main.js"],"sourcesContent":["export const refs = {\n    form: document.querySelector('.search-form'),\n    formInput: document.querySelector('.form-input'),\n    btn: document.querySelector('.search-button'),\n    galleryList: document.querySelector('.gallery'),\n    container: document.querySelector('.container'),\n    loader: document.querySelector('.loader'),\n    btnLoadMore: document.querySelector('.js-btn-load'),\n  };","export function addMarkup(image) {\n  const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = image;\n    return `<li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\" class=\"gallery-link\">\n            <img\n              src=\"${webformatURL}\"\n              class=\"gallery-image\"\n              alt=\"${tags}\"\n            />\n          </a>\n          <div class=\"modal-text\"> \n              <div class=\"modal-element\"><p>Likes</p><span>${likes}</span></div>\n              <div class=\"modal-element\"><p>Views</p><span>${views}</span></div>\n              <div class=\"modal-element\"><p>Comments</p><span>${comments}</span></div>\n              <div class=\"modal-element\"><p>Downloads</p><span>${downloads}</span></div>\n          </div>\n        </li>`;\n  }","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst MESSAGE =\n  'Sorry, there are no images matching your search query. Please try again!';\nexport function onError() {\n  iziToast.error({\n    message: MESSAGE,\n    position: 'topRight',\n  });\n}","import { refs } from './refs';\nimport { addMarkup } from './addMarkup';\nimport { onError } from './onError';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function makeGalleryItem(response) {\n  const result = response.hits.map(addMarkup).join('');\n\n  if (response.hits.length) {\n    refs.galleryList.innerHTML = result;\n    let lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n  } else {\n    onError();\n  }\n}","import axios from \"axios\";\n\nexport async function fetchImg(input, currentPage) {\n  const API_KEY = '42271393-ceafa19bde7d0a63fb15d5d6f';\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const url = `${BASE_URL}${END_POINT}`;\n\n  const params = {\n    key: API_KEY,\n    q: input,\n    image_type: 'photo',\n    orientation:'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n    page: currentPage,\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n\n// export function fetchImg(input) {\n//     const API_KEY = '42271393-ceafa19bde7d0a63fb15d5d6f';\n//     const BASE_URL = 'https://pixabay.com/api/';\n//     const parameters = `q=${input}&image_type=photo&orientation=horizontal&safesearch=true`;\n//     const URL = `${BASE_URL}?key=${API_KEY}&${parameters}`;\n//     return fetch(URL).then(response => {\n//       if (!response.ok) {\n//         throw new Error(response.status);\n//       }\n//       return response.json();\n//     });\n//   }","import { refs } from './refs';\n\nexport function loaderOn() {\n  refs.loader.classList.remove('hidden');\n}\n\nexport function loaderOff() {\n  refs.loader.classList.add('hidden');\n}","import { refs } from './refs';\nimport { makeGalleryItem } from './createGallery';\nimport { onError } from './onError';\nimport { fetchImg } from './fetchImage';\nimport { loaderOn } from './loader';\nimport { loaderOff } from './loader';\n\nlet query;\nlet page;\nlet maxPage;\n\n\nexport async function onFormSubmit(event) {\n  event.preventDefault();\n  query = event.currentTarget.elements.input.value.trim();\n  page = 1;\n\n  if (!query) {\n    onError();\n    return;\n  }\n\n  loaderOn();\n\n  try {\n    const data = await fetchImg(query, page);\n    if (data.totalHits === 0) {\n      onError();\n    }\n    maxPage = Math.ceil(data.totalHits / 15);\n    makeGalleryItem(data.images);\n    console.log(data);\n  } catch (err) {\n    onError(err);\n  }\n\n  loaderOff();\n  checkBtnVisibleStatus();\n  refs.form.reset();\n}\n\nexport async function onLoadMoreClick() {\n  page += 1;\n  loaderOn();\n  const data = await fetchImg(userSearch, page);\n  makeGalleryItem(data.images);\n  loaderOff();\n  checkBtnVisibleStatus();\n\n  const height =\n    refs.galleryList.firstElementChild.getBoundingClientRect().height;\n\n  scrollBy({\n    behavior: 'smooth',\n    top: height,\n  });\n}\n\nfunction showLoadBtn() {\n  refs.btnLoadMore.classList.remove('hidden');\n}\nfunction hideLoadBtn() {\n  refs.btnLoadMore.classList.add('hidden');\n}\n\nfunction checkBtnVisibleStatus() {\n  if (page >= maxPage) {\n    hideLoadBtn();\n  } else {\n    showLoadBtn();\n  }\n}","import { refs } from './js/refs';\nimport { onFormSubmit } from './js/onFormSubmit';\nimport { onLoadMoreClick } from './js/onFormSubmit';\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.btnLoadMore.addEventListener('click', onLoadMoreClick);"],"names":["refs","addMarkup","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","MESSAGE","onError","iziToast","makeGalleryItem","response","result","SimpleLightbox","fetchImg","input","currentPage","API_KEY","url","params","axios","loaderOn","loaderOff","query","page","maxPage","onFormSubmit","event","data","checkBtnVisibleStatus","onLoadMoreClick","height","showLoadBtn","hideLoadBtn"],"mappings":"owBAAO,MAAMA,EAAO,CAChB,KAAM,SAAS,cAAc,cAAc,EAC3C,UAAW,SAAS,cAAc,aAAa,EAC/C,IAAK,SAAS,cAAc,gBAAgB,EAC5C,YAAa,SAAS,cAAc,UAAU,EAC9C,UAAW,SAAS,cAAc,YAAY,EAC9C,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,cAAc,CACnD,ECRI,SAASC,EAAUC,EAAO,CAC/B,KAAM,CAAE,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EAC/E,MAAO;AAAA,qBACUC,CAAa;AAAA;AAAA,qBAEbC,CAAY;AAAA;AAAA,qBAEZC,CAAI;AAAA;AAAA;AAAA;AAAA,6DAIoCC,CAAK;AAAA,6DACLC,CAAK;AAAA,gEACFC,CAAQ;AAAA,iEACPC,CAAS;AAAA;AAAA,cAG1E,CCdA,MAAMC,EACJ,2EACK,SAASC,GAAU,CACxBC,EAAS,MAAM,CACb,QAASF,EACT,SAAU,UACd,CAAG,CACH,CCJO,SAASG,EAAgBC,EAAU,CACxC,MAAMC,EAASD,EAAS,KAAK,IAAIb,CAAS,EAAE,KAAK,EAAE,EAE/Ca,EAAS,KAAK,QAChBd,EAAK,YAAY,UAAYe,EACd,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,gBAAiB,SACjB,aAAc,GACpB,CAAK,EACQ,QAAO,GAEhBL,GAEJ,CClBO,eAAeM,EAASC,EAAOC,EAAa,CACjD,MAAMC,EAAU,qCAGVC,EAAM,2BAENC,EAAS,CACb,IAAKF,EACL,EAAGF,EACH,WAAY,QACZ,YAAY,aACZ,WAAY,OACZ,SAAU,GACV,KAAMC,CACV,EAGE,OADY,MAAMI,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACb,CClBO,SAASE,GAAW,CACzBxB,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CAEO,SAASyB,GAAY,CAC1BzB,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CCDA,IAAI0B,EACAC,EACAC,EAGG,eAAeC,EAAaC,EAAO,CAKxC,GAJAA,EAAM,eAAc,EACpBJ,EAAQI,EAAM,cAAc,SAAS,MAAM,MAAM,OACjDH,EAAO,EAEH,CAACD,EAAO,CACVf,IACA,MACD,CAEDa,IAEA,GAAI,CACF,MAAMO,EAAO,MAAMd,EAASS,EAAOC,CAAI,EACnCI,EAAK,YAAc,GACrBpB,IAEFiB,EAAU,KAAK,KAAKG,EAAK,UAAY,EAAE,EACvClB,EAAgBkB,EAAK,MAAM,EAC3B,QAAQ,IAAIA,CAAI,CACjB,MAAa,CACZpB,EAAW,CACZ,CAEDc,IACAO,IACAhC,EAAK,KAAK,OACZ,CAEO,eAAeiC,GAAkB,CACtCN,GAAQ,EACRH,IACA,MAAMO,EAAO,MAAMd,EAAS,WAAYU,CAAI,EAC5Cd,EAAgBkB,EAAK,MAAM,EAC3BN,IACAO,IAEA,MAAME,EACJlC,EAAK,YAAY,kBAAkB,sBAAqB,EAAG,OAE7D,SAAS,CACP,SAAU,SACV,IAAKkC,CACT,CAAG,CACH,CAEA,SAASC,GAAc,CACrBnC,EAAK,YAAY,UAAU,OAAO,QAAQ,CAC5C,CACA,SAASoC,GAAc,CACrBpC,EAAK,YAAY,UAAU,IAAI,QAAQ,CACzC,CAEA,SAASgC,GAAwB,CAC3BL,GAAQC,EACVQ,IAEAD,GAEJ,CCnEAnC,EAAK,KAAK,iBAAiB,SAAU6B,CAAY,EACjD7B,EAAK,YAAY,iBAAiB,QAASiC,CAAe"}