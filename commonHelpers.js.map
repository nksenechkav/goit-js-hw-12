{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/loader.js","../src/js/onError.js","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const refs = {\n    form: document.querySelector('.search-form'),\n    formInput: document.querySelector('.form-input'),\n    btn: document.querySelector('.search-button'),\n    galleryList: document.querySelector('.gallery'),\n    container: document.querySelector('.container'),\n    loader: document.querySelector('.loader'),\n    btnLoadMore: document.querySelector('.js-btn-load'),\n  };","import { refs } from './refs';\n\nexport function loaderOn() {\n  refs.loader.classList.remove('hidden');\n}\n\nexport function loaderOff() {\n  refs.loader.classList.add('hidden');\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const MESSAGE =\n  'Sorry, there are no images matching your search query. Please try again!';\nexport const LIMIT =\n  \"We're sorry, but you've reached the end of search results.\";\nexport const CORRECT = 'Please enter correct information.';\n\nexport function onError(message) {\n  iziToast.error({\n    message: message,\n    position: 'topRight',\n  });\n}","import { refs } from './refs';\nimport { onError} from './onError';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { perPage } from './pixabay-api';\nimport { MESSAGE } from './onError';\n\nexport let totalHits;\n\nexport let lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nexport function createGalleryItem(response) {\n  const result = response.hits.map(addMarkup).join('');\n  totalHits = response.totalHits;\n\n  if (totalHits > perPage) {\n    refs.btnLoadMore.classList.remove('hidden');\n  }\n\n  if (response.hits.length) {\n    refs.galleryList.insertAdjacentHTML('beforeend', result);\n  } \n\n  else {\n    onError(MESSAGE);\n  }\n\n  lightbox.refresh();\n}\n\n\nexport function addMarkup(image) {\n  const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = image;\n    return `<li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\" class=\"gallery-link\">\n            <img\n              src=\"${webformatURL}\"\n              class=\"gallery-image\"\n              alt=\"${tags}\"\n            />\n          </a>\n          <div class=\"modal-text\"> \n              <div class=\"modal-element\"><p>Likes</p><span>${likes}</span></div>\n              <div class=\"modal-element\"><p>Views</p><span>${views}</span></div>\n              <div class=\"modal-element\"><p>Comments</p><span>${comments}</span></div>\n              <div class=\"modal-element\"><p>Downloads</p><span>${downloads}</span></div>\n          </div>\n        </li>`;\n  }","import axios from 'axios';\nimport { refs } from './refs';\nimport { loaderOn } from './loader';\nimport { loaderOff } from './loader';\nimport { createGalleryItem } from './render-functions';\nimport { onError } from './onError';\n\nimport { MESSAGE } from './onError';\nimport { totalHits } from './render-functions';\nimport { LIMIT } from './onError';\nimport { CORRECT } from './onError';\nimport { lightbox } from './render-functions';\n\nexport const perPage = 15;\nlet page;\nlet userSearch;\n\nexport async function onFormSubmit(event) {\n  event.preventDefault();\n  refs.btnLoadMore.classList.add('hidden');\n\n  refs.galleryList.innerHTML = '';\n  page = 1;\n  userSearch = event.target.elements.input.value.trim();\n\n  if (userSearch) {\n\n    try {\n      loaderOn();\n      const response = await fetchImg(userSearch, page);\n      createGalleryItem(response);\n    } \n    \n    catch (error) {\n      onError(MESSAGE);\n    } \n      loaderOff();\n      refs.form.reset();\n  } \n  \n  else {\n    refs.form.elements.input.value = '';\n    onError(CORRECT);\n  }\n}\n\nexport async function fetchImg(input, page) {\n\n  const API_KEY = '42271393-ceafa19bde7d0a63fb15d5d6f';\n  axios.defaults.baseURL = 'https://pixabay.com/api/';\n  const parameters = `q=${input}&image_type=photo&orientation=horizontal&safesearch=true`;\n  const URL = `?key=${API_KEY}&${parameters}`;\n\n  const config = {\n    params: {\n      per_page: perPage,\n      page: page,\n    },\n  };\n\n  const response = await axios.get(URL, config);\n  return response.data;\n}\n\nexport async function onLoadClick() {\n  page += 1;\n  loaderOn();\n\n  const totalPages = Math.ceil(totalHits / perPage);\n\n  const result = await fetchImg(userSearch, page);\n    createGalleryItem(result);\n    scrollPage();\n    loaderOff();\n    lightbox.refresh();\n\n  if (page >= totalPages) {\n    refs.btnLoadMore.classList.add('hidden');\n    onError(LIMIT);\n  } \n}\n\nfunction scrollPage() {\n  const cardHeight = refs.galleryList.firstElementChild.getBoundingClientRect();\n  const size = cardHeight.height * 2;\n  window.scrollBy({ top: size, left: 0, behavior: 'smooth' });\n}","import { refs } from './js/refs';\nimport { onFormSubmit } from './js/pixabay-api';\nimport { onLoadClick } from './js/pixabay-api';\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nrefs.btnLoadMore.addEventListener('click', onLoadClick);"],"names":["refs","loaderOn","loaderOff","MESSAGE","LIMIT","CORRECT","onError","message","iziToast","totalHits","lightbox","SimpleLightbox","createGalleryItem","response","result","addMarkup","perPage","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","page","userSearch","onFormSubmit","event","fetchImg","input","API_KEY","axios","parameters","URL","config","onLoadClick","totalPages","scrollPage","size"],"mappings":"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"}